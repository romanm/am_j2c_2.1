
sql.msp_ehealth_response.select: \
SELECT * FROM doc, docbody \
WHERE doc_id=docbody_id AND doctype=:MSP_EHEALT_RESPONSE_type AND parent_id=:msp_id;

sql.msp_division.select: \
SELECT * FROM doc, docbody \
WHERE doc_id=docbody_id AND doctype=16 AND doc_id=:msp_division_id 

sql.msp_divisions.select: \
SELECT * FROM doc, docbody \
WHERE doc_id=docbody_id AND doctype=16 AND parent_id=:msp_id

sql.db1.users.fromUsername: \
SELECT * FROM users LEFT JOIN person ON person_id=user_id WHERE username=:username

sql.db1.user.msp: \
SELECT * FROM doc ul, msp WHERE parent_id=:user_id AND reference=msp_id

sql.msp.msp_access_token.read: \
SELECT dt.doctype, db.docbody FROM doc d, doc d2, doctype dt, docbody db \
WHERE d2.parent_id=:msp_id AND d.doc_id=db.docbody_id AND d.doctype=doctype_id \
AND d2.doc_id=d.parent_id AND d.doctype IN (54,55)

sql.msp_employee.select: \
${sql.msp_employee.list}; \
${sql.msp_employee.role.list}

sql.msp_employee.role.list: \
SELECT user_id, r.*, ur.user_role_id FROM user_roles ur, users u, roles r WHERE role_id=role AND u.username=ur.username \
AND user_id IN (SELECT person_id FROM (${sql.msp_employee.list}) x)

sql.msp_employee.list: \
SELECT p.*, username FROM person p, users u, doc dEmployee, doc dMsp \
WHERE dEmployee.doctype = 13 \
AND person_id=dEmployee.doc_id AND person_id=u.user_id \
AND dMsp.parent_id=dEmployee.doc_id AND dMsp.reference=:msp_id

sql.docbody_byId.select: \
SELECT docbody FROM docbody WHERE docbody_id=:doc_id
